{% extends 'base.html' %} {% block title %}Detalhes da Solicitação
{{solicitacao.id }}{% endblock %} {% block content %}

<div class="container-fluid">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1>Detalhes da Solicitação</h1>
    <div>
      <!-- Botão Gerar Pedido -->
      <a
        href="{% url 'pedidos:criar_pedido' solicitacao.id %}"
        class="btn btn-success"
      >
        <i class="fas fa-file-invoice"></i> Gerar Pedido
      </a>
      <!-- Botão Exportar PDF -->
      <a
        href="{% url 'solicitacoes:exportar_pdf' solicitacao.id %}"
        target="_blank"
        class="btn btn-primary"
      >
        <i class="fas fa-file-pdf"></i> Exportar PDF
      </a>

      <!-- Botão Editar -->
      <a
        href="{% url 'solicitacoes:editar_solicitacao' solicitacao.id %}"
        class="btn btn-warning"
      >
        <i class="fas fa-edit"></i> Editar
      </a>

      <!-- Botão Excluir -->
      <form
        action="{% url 'solicitacoes:excluir_solicitacao' solicitacao.id %}"
        method="post"
        style="display: inline-block"
        onsubmit="return confirm('Tem certeza que deseja excluir esta solicitação?');"
      >
        {% csrf_token %}
        <button type="submit" class="btn btn-danger">
          <i class="fas fa-trash-alt"></i> Excluir
        </button>
      </form>
    </div>
  </div>

  <p><strong>Solicitante:</strong> {{ solicitacao.solicitante_nome }}</p>
  <p>
    <strong>Data da Solicitação:</strong>
    {{solicitacao.data_solicitacao|date:"d/m/Y" }}
  </p>
  <p>
    <strong>Programar Para:</strong> {{solicitacao.programar_para|date:"d/m/Y"}}
  </p>

  <h3>Itens</h3>
  <table class="table table-bordered table-hover">
    <thead>
      <tr>
        <th>Item</th>
        <th>Aplicação</th>
        <th>Descrição</th>
        <th>Especificação</th>
        <th>Quantidade</th>
      </tr>
    </thead>
    <tbody>
      {% for item in itens %}
      <tr>
        <td>{{ item.item }}</td>
        <td>{{ item.aplicacao }}</td>
        <td>{{ item.descricao }}</td>
        <td>{{ item.especificacao }}</td>
        <td>{{ item.quantidade }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5">Nenhum item cadastrado.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <a href="{% url 'solicitacoes:index' %}" class="btn btn-secondary">Voltar</a>
</div>
{% endblock %}
