{% extends 'base.html' %} {% block title %}{{ page_title }}{% endblock %}

{% block content %}

<div class="container mt-3">
  <div class="d-flex justify-content-between align-items-center">
    <h3>Pedido {{ pedido.numero }}</h3>
    <div>
      <a class="btn btn-warning" href="#">
        <i class="fas fa-list"></i> Editar Itens
      </a>
      <a
        href="{% url 'pedidos:exportar_pedido_pdf' pedido.pk %}"
        target="_blank"
        class="btn btn-danger"
      >
        <i class="fas fa-file-pdf"></i> Exportar PDF
      </a>
    </div>
  </div>

  <hr />

  <div class="row">
    <div class="col-md-6">
      <h6>Fornecedor</h6>
      <p>
        <strong>{{ pedido.fornecedor_nome }}</strong><br />
        CNPJ/CPF: {{ pedido.fornecedor_cnpj_cpf }}<br />
        {{ pedido.fornecedor_endereco }} - {{ pedido.fornecedor_cidade }}<br />
        Tel: {{ pedido.fornecedor_telefone }}
      </p>
    </div>
    <div class="col-md-6">
      <h6>Dados</h6>
      <p>
        Emissão: {{ pedido.data_emissao|date:"d/m/Y" }}<br />
        Entrega: {{ pedido.local_entrega }} / Prazo: {{ pedido.prazo_entrega}}<br />
        Centro de Custo: {{ pedido.centro_custo }}<br />
        Condição de Pagamento: {{ pedido.condicao_pagamento }}
      </p>
    </div>
  </div>

  <h6 class="mt-3">Itens</h6>
  <div class="table-responsive">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>Item</th>
          <th>Descrição</th>
          <th>Un</th>
          <th>Qtd</th>
          <th>Preço</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        {% for it in itens %}
        <tr>
          <td>{{ it.item }}</td>
          <td>{{ it.descricao }}</td>
          <td>{{ it.unidade }}</td>
          <td>{{ it.quantidade }}</td>
          <td>R$ {{ it.preco_unitario|floatformat:2 }}</td>
          <td>R$ {{ it.preco_total|floatformat:2 }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6">Nenhum item.</td>
        </tr>
        {% endfor %}
      </tbody>
      <tfoot>
        <tr>
          <th colspan="5" class="text-end">Valor Total</th>
          <th>R$ {{ valor_total|floatformat:2 }}</th>
        </tr>
      </tfoot>
    </table>
  </div>

  <a href="{% url 'pedidos:index' %}" class="btn btn-secondary mt-2">Voltar</a>
</div>
{% endblock %}
